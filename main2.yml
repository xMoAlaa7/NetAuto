- name: Displaying DHCP Configuration Information
  tags: dhcp, d_dhcp
  debug:
    msg: 
      - "{{ prepend_info }} of the commands here are prepended with no. The values without any prepend are as shown."
      - "State is set to {{ state_typeA }}"
      - "ip dhcp pool {{ item.key }}"
      - "ip dhcp excluded-address {{ item.value.excluded_address }}"
      - "network {{ item.value.network_id }}"
      - "default-router {{ item.value.default_router_ip }}"
      - "dns-server 8.8.8.8"
  loop: "{{ pools | dict2items }}"

- name: Displaying L3_Interfaces Configuration Information
  tags: l3_interfaces, d_l3_interfaces
  debug:
    msg:
      - "{{ prepend_info }} of the commands here are prepended with no. The values without any prepend are as shown."
      - "interface FastEthernet0/0"
      - "no shutdown"
      - "interface {{ item.key }}"
      - "encapsulation dot1Q {{ item.value.encapsulation}}"
      - "ip address {{ item.value.ip_address}}"
  loop: "{{ subinterfaces | dict2items }}"

- name: Displaying VLANs Configuration Information
  tags: vlans, d_vlans
  debug:
    msg:
      - "State is set to {{ state_typeA }}"
      - "vlan {{ item.value.vlan_id }}"
      - "name {{ item.value.name }}"
  loop: "{{ vlans | dict2items }}"
  when: playbook_name == "tagsSW_config_playbook.yml"

- name: Displaying L2_Trunk_Interfaces Configuration Information
  tags: l2_interfaces, d_l2_interfaces, tr_d_l2_interfaces
  debug:
    msg:
      - "State is set to {{ state_typeA }}"
      - "interface {{ item.key }}"
      - "switchport trunk encapsulation dot1q"
      - "switchport mode trunk"
      - "switchport trunk allowed vlan {{ item.value.allowed_vlans }}"
  loop: "{{ l2_interfaces | dict2items }}"
  when: item.value.mode == "trunk"

- name: Displaying L2_Access_Interfaces Configuration Information
  tags: l2_interfaces, d_l2_interfaces, acc_d_l2_interfaces
  debug:
    msg:
      - "State is set to {{ state_typeA }}"
      - "interface {{ item.key }}"
      - "switchport mode access"
      - "switchport access vlan {{ item.value.vlan }}"
  loop: "{{ l2_interfaces | dict2items }}"
  when: item.value.mode == "access"

- name: Displaying Management Interfaces Configuration Information
  tags: mgmt_interfaces, d_mgmt_interfaces
  debug:
    msg:
      - "State is set to {{ state_typeA }}"
      - "interface vlan 20"
      - "ip address {{ mgmt_ip_address }}"
      - "no shutdown"

- name: Displaying Users Configuration Information
  tags: users, d_users
  debug:
    msg:
      - "{{ item.value.disabled }} {{ item.key }} priv {{ item.value.privilege }} secret {{ item.value.secret }} {{ item.value.hashed_password }}"
      - "State is set to {{ item.value.state }} for the next lines."
      - "ip ssh pubkey-chain"
      - "username {{ item.key }}"
      - "key-string"
      - "Public key inserted here"
  loop: "{{ users | dict2items }}"

- name: Confirmation
  tags: always
  pause:
    prompt: "You're about to configure {{ inventory_hostname }} with the previous configurations. To abort click CTRL+C then A, to continue, click Enter."
